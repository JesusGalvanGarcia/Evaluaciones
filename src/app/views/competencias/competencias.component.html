<div class="bgImageContainer2"></div>
<div class="container main-container">
  <main>
    <!-- Contenedor -->
    <div class="sub-contenedor-login">
      <div *ngIf="start" class="contenedor-padre">
        <div class="contenedor-form">
          <div class="row justify-content-center">
            <div>
                            
              <button style="width:100%" class="btn btn-light" (click)="home()">
               <mat-icon>home</mat-icon>
              </button><br/>
           </div><br/>
            <div class="col-md-10 text-center" style="width: 100%;">
              <div>
                <br/>
                <span class="sd">{{ DesempenoTest.name  }}</span>
              </div>
            </div>
            <div class="col-md-10 text-center">
              <img src="assets/logo/logo_trinitas.jpg" style="width: 65%;" alt="Logo_Trinitas" class="mx-auto" />
            </div>
           
            <div class="col-md-12 text-center" style="width: 95% !important;">
              <br/> <br/> 
              <span class="sdComienzo">{{ DesempenoTest.introduction_text }}</span>
            </div>
            <br/>
            <div class="text-center btnEmpezar">     <br/>     <br/>
              <button class="btn btn-success" (click)="FalseMark()">Comenzar</button>
              <br/>     <br/>
            </div>
          </div>
        </div>
        <app-loading *ngIf="isLoading"></app-loading>
      </div>
      <div *ngIf="!start" class="contenedor-padre">
        <div *ngIf="showModule">
          <div class="contenedor-padreMod">
            <div class="contenedor-form">
          
              <div class="row justify-content-center" style="padding-bottom: 50px; ">
                <div>
                            
                  <button style="width:100%" class="btn btn-light" (click)="goIndex()">
                   <mat-icon>home</mat-icon>
                  </button><br/>
               </div><br/>
                <div class="col-md-10 center-div">
                  <div>
                    <span class="sd">{{ DesempenoTest.name }}</span><br/>
                  </div>
                </div>
                <div class="backModul" *ngIf="index!= 0 && showModule ==true">
                  <button class="btn btn-light" mat-button (click)="backQuestion()">
                    <img
                    src="assets/svg/back.svg"
                    style="color:white"
                    />
                   </button>
                 </div>
                <br/>
                <div style="width: 100%;">
                  <div class="col-md-10 center-div" style="width: 100%;">  
                    <span class="sdPregunta">{{ DesempenoTest.test_modules[index].name }} </span>
                  </div>
                  <br/>
                  <div class="col-md-10 text-center" style="width: 100%;">
                    <img src="assets/logo/logo_trinitas.jpg" style="width: 65%;" alt="Logo_Trinitas" class="mx-auto" />
                  </div>
               
                  <br/>
                  <br/>
                  <div class="text-center btnEmpezarMod">
                    <button class="btn btn-success"  (click)="FalseMarkMoodulo()">Siguiente</button>
                  </div>
                  
                </div>
           
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="end" >            
          <div >
              <!-- Imagen de Login -->
          
       
              <div class="row justify-content-center" style="padding-bottom: 50px; padding-top: 20px;">
     
          
                  <div class="result-container">
                      <div class="result-header">
                          <app-loading *ngIf="isLoading==true"></app-loading>                            

                        <span class="result-title">¡Has terminado de contestar la encuesta!</span><br/><br/>
                      </div>

                      <div class="result-evaluation">
                        <span class="result-text" color="#000">Las evaluaciones han finalizado ya puedes continuar</span><br/><br/>
                        <span class="result-description">¡El siguiente paso es realizar el feedback y plan acción junto con el colaborador!</span><br/><br/>
                      </div>
          <div style="width: 100%;">
              <div class="back-to-evaluations">
                  <button class="btn btn-success back-to-evaluations-button" (click)="home()">Volver</button><br/><br/>
              </div>
          </div>
                    </div>
                    
                  <br />
                 
               
             
           
              </div>
          </div>
      </div>
        <div *ngIf="!showModule&&end==false">
          <div>
          <div class="contForm">
            <!-- Imagen de Login -->
            <div class="row justify-content-center" style="padding-bottom: 50px; ">
              <div>
                            
                <button style="width:100%" class="btn btn-light" (click)="home()">
                 <mat-icon>home</mat-icon>
                </button><br/>
             </div><br/>
              <div class="col-md-10 center-div">
                <div>
                  <span class="sd">{{ DesempenoTest.name }}</span>
                </div>
              </div>
              <br/>
              <div [class.screen]="!showQuestion">
                <div class="back" ><br/>
                  <button class="btn btn-light" mat-button (click)="backQuestion()">
                    <img
                    src="assets/svg/back.svg"
                    style="color:white"
                    />
                   </button>
                 </div>
                <div class="col-md-10 center-div" style="width: 100%;">
                  <span class="sdPregunta">{{ DesempenoTest.test_modules[index].questions[indexQuestion].description }}  </span>
                </div>
                <br/>
          
                <br/>
                <div style="margin-left: 20%;">
                  <div class="cent">
                    <div class="container">
                      <div *ngFor="let respuesta of DesempenoTest.test_modules[index].questions[indexQuestion].answers; let i = index" class="row">
                        <div class="col col-sm-1">
                          <input class="radio-button" type="radio" [disabled]="loading"
                          (click)="PostsaveAnswers(respuesta.id,DesempenoTest.test_modules[index].id, DesempenoTest.test_modules[index].questions[indexQuestion].id,respuesta.score,i )" 
                          name="flexRadioDefault" id="flexRadioDefault1"
                          [checked]="respuesta.user_answer_id === null? false:true"
                          [value]="respuesta.user_answer_id">
                        </div>
                        <div class="col col-sm-8">
                          <label for="respuesta{{respuesta.id}}">{{ respuesta.description }}</label>
                        </div>
                        <div class="col col-sm-2">
                          <span style="color:#b60b0b;font-weight: bold;font-size: 90%;"></span>
                        </div>
                      </div>
                      
                    </div>
                  </div>
                </div>
               
                <br/>  
               
              </div>
              <div class="cent">
                <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
                <!-- <button class="btn" *ngIf="!finish" class="btn btn-success">Guardar</button> -->
            </div>   
            </div>
       
            <div style="text-align: center;width: 90%;" *ngIf="(indexQuestion+1)==sizeQuestions">
              <span style="color:#616161;font-weight: bold;">Nota final del modulo:</span><br/><br/>
              <mat-form-field class="form-input" style="width: 80% !important;" >
              <textarea
              matInput
              style="width: 100%;"
              [placeholder]="'Escribe una nota adicional acerca de este modulo...'"
              [value]="DesempenoTest.test_modules[index].note"    
              [(ngModel)]="DesempenoTest.test_modules[index].note" 
             

            ></textarea>  <br/>
              </mat-form-field>
            </div> 
            <div class="pregunta-container">
              <span>Pregunta &nbsp;</span> {{ (indexQuestion+1) + "/" + (sizeQuestions) }}
            </div>

          </div>
        </div>
        </div>
      </div>
    </div>
  </main>
</div>
